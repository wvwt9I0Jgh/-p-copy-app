<!DOCTYPE html>
<html>
<head>
    <title>DetaylÄ± AÄŸ Bilgileri - Captive Portal</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f5f5f5; }
        .header { background-color: #2c3e50; color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .info-box { background-color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .info-title { font-size: 18px; font-weight: bold; color: #2c3e50; margin-bottom: 15px; border-bottom: 2px solid #3498db; padding-bottom: 5px; }
        .info-item { margin: 10px 0; padding: 10px; background-color: #f8f9fa; border-left: 4px solid #3498db; }
        .info-label { font-weight: bold; color: #34495e; }
        .info-value { margin-top: 5px; font-family: monospace; background-color: #ecf0f1; padding: 8px; border-radius: 4px; }
        .danger { border-left-color: #e74c3c !important; }
        .warning { border-left-color: #f39c12 !important; }
        .success { border-left-color: #27ae60 !important; }
        .btn { background-color: #3498db; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block; margin-right: 10px; }
        .btn:hover { background-color: #2980b9; }
        .dns-details { max-height: 200px; overflow-y: auto; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ” DetaylÄ± AÄŸ Analizi</h1>
        <p>EÄŸitim AmaÃ§lÄ± - BaÄŸlantÄ± #{{ event[0] }}</p>
    </div>

    <div class="info-box">
        <div class="info-title">ğŸŒ IP Adresi Bilgileri</div>
        <div class="info-item danger">
            <div class="info-label">âš ï¸ GerÃ§ek IP Adresi (EÄŸitim AmaÃ§lÄ±):</div>
            <div class="info-value">{{ event[1] }}</div>
        </div>
        <div class="info-item warning">
            <div class="info-label">ğŸŒ Public IP Adresi:</div>
            <div class="info-value">{{ event[10] }}</div>
        </div>
        <div class="info-item">
            <div class="info-label">ğŸ”’ MaskelenmiÅŸ IP:</div>
            <div class="info-value">{{ event[2] }}</div>
        </div>
        {% if event[8] != '-' %}
        <div class="info-item warning">
            <div class="info-label">ğŸ”— X-Forwarded-For (Proxy):</div>
            <div class="info-value">{{ event[8] }}</div>
        </div>
        {% endif %}
    </div>

    <div class="info-box">
        <div class="info-title">ğŸ–¥ï¸ Cihaz ve TarayÄ±cÄ± Bilgileri</div>
        <div class="info-item">
            <div class="info-label">ğŸ“± User-Agent:</div>
            <div class="info-value">{{ event[3] }}</div>
        </div>
        <div class="info-item">
            <div class="info-label">ğŸŒ Dil Tercihleri:</div>
            <div class="info-value">{{ event[4] }}</div>
        </div>
        {% if event[9] != '-' %}
        <div class="info-item">
            <div class="info-label">ğŸ”™ Referer (Nereden Geldi):</div>
            <div class="info-value">{{ event[9] }}</div>
        </div>
        {% endif %}
    </div>

    <div class="info-box">
        <div class="info-title">ğŸ  Sunucu AÄŸ Bilgileri</div>
        <div class="info-item success">
            <div class="info-label">ğŸ·ï¸ Hostname:</div>
            <div class="info-value">{{ event[5] }}</div>
        </div>
        <div class="info-item success">
            <div class="info-label">ğŸ”— Sunucu Local IP:</div>
            <div class="info-value">{{ event[6] }}</div>
        </div>
    </div>

    <div class="info-box">
        <div class="info-title">ğŸ“¡ DNS ve AÄŸ YapÄ±landÄ±rmasÄ±</div>
        <div class="info-item">
            <div class="info-label">ğŸŒ DNS Sunucu Bilgileri:</div>
            <div class="info-value dns-details">{{ event[7] }}</div>
        </div>
    </div>

    <div class="info-box">
        <div class="info-title">ğŸ” AÄŸ Tarama SonuÃ§larÄ± (EÄŸitim AmaÃ§lÄ±)</div>
        {% if network_devices %}
        <div class="info-item">
            <div class="info-label">ğŸ“± Tespit Edilen Cihazlar:</div>
            <div class="info-value">
                {% for device in network_devices %}
                    <div style="margin: 5px 0; padding: 5px; background-color: #e8f5e8; border-radius: 3px;">
                        ğŸ”— IP: {{ device.ip }} - 
                        {% if device.status == 'active' %}âœ… Aktif{% else %}âŒ Pasif{% endif %}
                        {% if device.response_time %} ({{ device.response_time }}){% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>
        {% else %}
        <div class="info-item">
            <div class="info-label">ğŸ“± AÄŸ Tarama:</div>
            <div class="info-value">Tarama yapÄ±lmadÄ± veya cihaz bulunamadÄ±</div>
        </div>
        {% endif %}
    </div>

    <div class="info-box">
        <div class="info-title">â° Zaman Bilgileri</div>
        <div class="info-item">
            <div class="info-label">ğŸ“… BaÄŸlantÄ± ZamanÄ±:</div>
            <div class="info-value">{{ event[12] }}</div>
        </div>
    </div>

    <div style="margin-top: 30px;">
        <a href="/admin" class="btn">ğŸ”™ Admin Paneli</a>
        <a href="/export" class="btn">ğŸ“Š CSV Export</a>
    </div>

    <div style="margin-top: 30px; padding: 15px; background-color: white; border-radius: 8px; border-left: 4px solid #e74c3c;">
        <h4>âš ï¸ EÄÄ°TÄ°M AMAÃ‡LI UYARI</h4>
        <p><strong>Bu bilgiler sadece eÄŸitim ve test amaÃ§lÄ±dÄ±r.</strong> GerÃ§ek ortamlarda kiÅŸisel verilerin toplanmasÄ± yasal dÃ¼zenlemelere tabidir. KullanÄ±rken yerel yasalarÄ± ve etik kurallarÄ± gÃ¶z Ã¶nÃ¼nde bulundurun.</p>
    </div>
</body>
</html>
